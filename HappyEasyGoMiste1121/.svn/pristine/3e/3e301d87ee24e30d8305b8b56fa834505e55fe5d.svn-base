(function(r){function m(){var n={},t=!1,g="DEVO",b;b={view:"popup",width:"700"};var m=function(){},p=null,k="INACTIVE",h={DEVO:"http://devo.gocashfree.com",TEST:"https://test.gocashfree.com",PROD:"https://www.gocashfree.com"},u="",v="",q=!1,A={inline:1,popup:1},f=function(a,d){null!=p&&p({name:a,status:"ERROR",message:d})},l=function(){var a="";switch(g){case "PROD":a=h.PROD;break;case "TEST":a=h.TEST+"/billpay";break;case "DEVO":a=h.DEVO+"/billpay"}return a},w=function(a){document.getElementById("cfPaymentFrame").src=
a},x=function(){"popup"==b.view&&document.body.classList.add("noscroll")},B=function(){if("INACTIVE"!=k){if(!1===confirm("Do you want to cancel the payment?"))return!1;k="INACTIVE";document.getElementById("cf-outer-div").style.display="none";document.getElementById("cfPaymentFrame").contentWindow.postMessage("abort",h[g]);"popup"==b.view&&document.body.classList.remove("noscroll");return"done"}},y=function(a){document.getElementById("frame-loader").style.display="none";document.getElementById("cfPaymentFrame").style.display=
"block";"popup"==a&&(document.getElementById("frame-close").style.display="block")},z=function(a){k="ACTIVE";"popup"==b.view?(a+="?view=popup",document.getElementById("cf-outer-div").style.display="block",document.getElementById("frame-loader").style.display="block",document.getElementById("frame-close").style.display="none",document.getElementById("cfPaymentFrame").style.display="none",w(a),document.getElementById("cfPaymentFrame").onload=function(){y("popup")},x()):"inline"==b.view&&(document.getElementById("cf-inner-div").style.display=
"block",document.getElementById("frame-loader").style.display="block",document.getElementById("cfPaymentFrame").style.display="none",w(a),document.getElementById("cfPaymentFrame").onload=function(){y(b.view)},x())},C=function(a,d){var c=new XMLHttpRequest;"withCredentials"in c?c.open(a,d,!0):"undefined"!=typeof XDomainRequest?(c=new XDomainRequest,c.open(a,d)):c=null;return c},D=function(a,d,c){var b=C("POST",a);b?(b.onload=function(){var a=JSON.parse(b.responseText);c(a)},b.onerror=function(){f("PAYMENT_REQUEST",
"There was an error making the request.")},a=JSON.stringify(d),u=d.paymentToken,b.setRequestHeader("Content-type","application/json"),b.send(a)):f("PAYMENT_REQUEST","Frame checkout is not supported")},E=function(a){"OK"==a.status?"page"==b.view||"true"==a.redirect?location.href=a.paymentLink:(v=a.paymentLink,q=!0,z(a.paymentLink)):(q=!1,f("PAYMENT_REQUEST",a.message))};n.init=function(a){var d=a.layout||{},c;for(c in d)b[c]=d[c];500>parseInt(b.width)?b.width=500:700<parseInt(b.width)&&(b.width=700);
g=a.mode||"TEST";if(!(g in h))return{status:"ERROR",message:"Invalid mode passed"};document.getElementById("cashfree-css")||(a="DEVO"==g?l()+"/assets/cashfree-sdk.css":l()+"/assets/cashfree.sdk.v1.css",d=document.getElementsByTagName("head")[0],c=document.createElement("link"),c.id="cashfree-css",c.rel="stylesheet",c.type="text/css",c.href=a,c.media="all",d.appendChild(c));a:if(!b.view in A)a=void 0;else{c='<a class="frame-close" title="Close" id="frame-close" href="#"><img src="'+(l()+"/assets/close-icon.png")+
'" height="50px"/></a>';var e;e=r.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;a=document.createElement("iframe");a.style.width=b.width+"px";a.id="cfPaymentFrame";a.name="cfPaymentFrame";a.scrolling="no";a.frameBorder="0";d=document.createElement("div");d.id="cf-inner-div";d.className="cf-inner-div";d.style.width=b.width+"px";d.innerHTML='<div id="frame-loader"><div class="cssload-container"><div class="cssload-speeding-wheel"></div></div>';if("popup"==b.view)d.style.height=
e+"px",a.style.height="100%",e=document.createElement("div"),e.id="cf-outer-div",e.className="cf-outer-div",document.body.appendChild(e),e.innerHTML=c,e.appendChild(d),document.getElementById("frame-close").addEventListener("click",B);else if("inline"==b.view){c=document.getElementById(b.container);if(!c){a={status:"ERROR",message:"Frame container is not present"};break a}c.appendChild(d);d.style.display="none"}d.appendChild(a);a={status:"OK"}}if("ERROR"==a.status)return{status:"ERROR",message:a.message};
t=!0;return{status:"OK",message:"SDK initialized"}};n.makePayment=function(a,b){if(t)if(p=b||m,"ACTIVE"==k)f("PAYMENT_REQUEST","Payment is in progress");else if(q&&u==a.paymentToken)z(v);else{var c=l()+"/checkout/post/submit-js-v1";null==c?f("Unsupported mode"):D(c,a,E)}else f("PAYMENT_REQUEST","Failed to initialize cashfree sdk")};return n}"undefined"===typeof CashFree?r.CashFree=m():console.log("CashFree is already defined.")})(window);
